<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Clicker Game</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 400px;
            margin: 0 auto;
            text-align: center;
        }
        
        h1 {
            margin: 20px 0;
            font-size: 24px;
        }
        
        .score {
            font-size: 32px;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .click-area {
            width: 200px;
            height: 200px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            margin: 30px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: 4px solid white;
            transition: all 0.1s;
            user-select: none;
        }
        
        .click-area:active {
            transform: scale(0.95);
            background: rgba(255,255,255,0.3);
        }
        
        .click-text {
            font-size: 24px;
            font-weight: bold;
        }
        
        .upgrades {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
        }
        
        button {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .stats {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÆ Telegram –ö–ª–∏–∫–µ—Ä</h1>
        
        <div class="score">–û—á–∫–∏: <span id="score">0</span></div>
        
        <div class="click-area" id="clickArea">
            <div class="click-text">–ö–õ–ò–ö–ê–ô!</div>
        </div>
        
        <div class="upgrades">
            <button onclick="buyUpgrade('click')" id="clickUpgrade">
                üí™ +1 –∫ –∫–ª–∏–∫—É (10 –æ—á–∫–æ–≤)
            </button>
            <button onclick="buyUpgrade('auto')" id="autoUpgrade">
                ü§ñ –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä (50 –æ—á–∫–æ–≤)
            </button>
            <button onclick="buyUpgrade('mega')" id="megaUpgrade">
                ‚ö° –ú–µ–≥–∞ –∫–ª–∏–∫ (100 –æ—á–∫–æ–≤)
            </button>
        </div>
        
        <div class="stats">
            <p>–°–∏–ª–∞ –∫–ª–∏–∫–∞: <span id="clickPower">1</span></p>
            <p>–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä–æ–≤: <span id="autoClickers">0</span></p>
            <p>–û—á–∫–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É: <span id="pointsPerSecond">0</span></p>
        </div>
        
        <button onclick="resetGame()" style="background: #4ecdc4;">
            üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞
        </button>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = null;
        if (window.Telegram && window.Telegram.WebApp) {
            tg = window.Telegram.WebApp;
            tg.expand();
            tg.enableClosingConfirmation();
        }
        
        // –ò–≥—Ä–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        let gameState = {
            score: 0,
            clickPower: 1,
            autoClickers: 0,
            upgrades: {
                click: { cost: 10, level: 0 },
                auto: { cost: 50, level: 0 },
                mega: { cost: 100, level: 0 }
            }
        };
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –∏–≥—Ä—ã
        function loadGame() {
            const saved = localStorage.getItem('tgClickerGame');
            if (saved) {
                gameState = JSON.parse(saved);
            }
            updateDisplay();
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
        function saveGame() {
            localStorage.setItem('tgClickerGame', JSON.stringify(gameState));
        }
        
        // –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∏–∫
        document.getElementById('clickArea').addEventListener('click', function() {
            gameState.score += gameState.clickPower;
            updateDisplay();
            saveGame();
            
            // –ê–Ω–∏–º–∞—Ü–∏—è
            this.style.transform = 'scale(0.9)';
            setTimeout(() => {
                this.style.transform = 'scale(1)';
            }, 100);
            
            // –í–∏–±—Ä–∞—Ü–∏—è –≤ Telegram
            if (tg && tg.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('light');
            }
        });
        
        // –ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π
        function buyUpgrade(type) {
            const upgrade = gameState.upgrades[type];
            
            if (gameState.score >= upgrade.cost) {
                gameState.score -= upgrade.cost;
                
                switch(type) {
                    case 'click':
                        gameState.clickPower += 1;
                        upgrade.level += 1;
                        upgrade.cost = Math.floor(upgrade.cost * 1.5);
                        break;
                    case 'auto':
                        gameState.autoClickers += 1;
                        upgrade.level += 1;
                        upgrade.cost = Math.floor(upgrade.cost * 1.8);
                        break;
                    case 'mega':
                        gameState.clickPower += 5;
                        upgrade.level += 1;
                        upgrade.cost = Math.floor(upgrade.cost * 2);
                        break;
                }
                
                updateDisplay();
                saveGame();
                
                // –í–∏–±—Ä–∞—Ü–∏—è
                if (tg && tg.HapticFeedback) {
                    tg.HapticFeedback.impactOccurred('medium');
                }
            }
        }
        
        // –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä—ã
        setInterval(() => {
            if (gameState.autoClickers > 0) {
                const points = gameState.autoClickers;
                gameState.score += points;
                updateDisplay();
                saveGame();
            }
        }, 1000);
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateDisplay() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('clickPower').textContent = gameState.clickPower;
            document.getElementById('autoClickers').textContent = gameState.autoClickers;
            document.getElementById('pointsPerSecond').textContent = gameState.autoClickers;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
            document.getElementById('clickUpgrade').textContent = 
                `üí™ +1 –∫ –∫–ª–∏–∫—É (${gameState.upgrades.click.cost} –æ—á–∫–æ–≤)`;
            document.getElementById('autoUpgrade').textContent = 
                `ü§ñ –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä (${gameState.upgrades.auto.cost} –æ—á–∫–æ–≤)`;
            document.getElementById('megaUpgrade').textContent = 
                `‚ö° –ú–µ–≥–∞ –∫–ª–∏–∫ (${gameState.upgrades.mega.cost} –æ—á–∫–æ–≤)`;
            
            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–æ–∫ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –æ—á–∫–æ–≤
            document.getElementById('clickUpgrade').disabled = 
                gameState.score < gameState.upgrades.click.cost;
            document.getElementById('autoUpgrade').disabled = 
                gameState.score < gameState.upgrades.auto.cost;
            document.getElementById('megaUpgrade').disabled = 
                gameState.score < gameState.upgrades.mega.cost;
        }
        
        // –ù–æ–≤–∞—è –∏–≥—Ä–∞
        function resetGame() {
            if (confirm('–ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É? –í–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω!')) {
                gameState = {
                    score: 0,
                    clickPower: 1,
                    autoClickers: 0,
                    upgrades: {
                        click: { cost: 10, level: 0 },
                        auto: { cost: 50, level: 0 },
                        mega: { cost: 100, level: 0 }
                    }
                };
                updateDisplay();
                saveGame();
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            loadGame();
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –∫–Ω–æ–ø–∫–∏
            if (tg && tg.MainButton) {
                tg.MainButton.setText('üéÆ –ú–æ—è –∏–≥—Ä–∞');
                tg.MainButton.show();
            }
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
            if (tg && tg.initDataUnsafe && tg.initDataUnsafe.user) {
                const user = tg.initDataUnsafe.user;
                console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Telegram:', user.first_name, user.id);
            }
        });
    </script>
</body>
</html>
